var optiontemplate='<option value="#value">#text</option>';var varchar_="varchar";var clob_="clob";var date_="date";var number_="number";var controlList=[{key:"1",value:$lang_form.editTable.control.text},{key:"2",value:$lang_form.editTable.control.textarea},{key:"10",value:$lang_form.editTable.control.ckeditor},{key:"3",value:$lang_form.editTable.control.dictionary},{key:"4",value:$lang_form.editTable.control.userSingle},{key:"8",value:$lang_form.editTable.control.userMulti},{key:"17",value:$lang_form.editTable.control.roleSingle},{key:"5",value:$lang_form.editTable.control.roleMulti},{key:"18",value:$lang_form.editTable.control.orgSingle},{key:"6",value:$lang_form.editTable.control.orgMulti},{key:"19",value:$lang_form.editTable.control.posSingle},{key:"7",value:$lang_form.editTable.control.posMulti},{key:"16",value:$lang_form.editTable.control.hidedomaid},{key:"9",value:$lang_form.editTable.control.attachement},{key:"11",value:$lang_form.editTable.control.select},{key:"13",value:$lang_form.editTable.control.checkbox},{key:"14",value:$lang_form.editTable.control.radio},{key:"12",value:$lang_form.editTable.control.officeControl},{key:"15",value:$lang_form.editTable.control.datepicker},{key:"20",value:$lang_form.editTable.control.processInstance},{key:"21",value:$lang_form.editTable.control.webSignControl},{key:"22",value:$lang_form.editTable.control.pictureShowControl}];var isExternal=0;var varFromList=[{key:0,value:$lang_form.editTable.varFrom.formInput},{key:1,value:$lang_form.editTable.varFrom.scriptDisplay},{key:2,value:$lang_form.editTable.varFrom.scriptHide},{key:3,value:$lang_form.editTable.varFrom.serialNumber}];jQuery.validator.addMethod("uniqueName",function(c,a){var b=TableRow.fieldManage.isFieldExist(c);return !b;},$lang_form.editTable.uniqueName);jQuery.validator.addMethod("word",function(b,a){return/^[A-Za-z]{1}([a-zA-Z0-9_]+)?$/gi.test(b);},$lang_form.editTable.word);jQuery.validator.addMethod("quotation",function(b,a){return/^[^'|"]*$/im.test(b);},$lang_form.editTable.quotation);function validTable(){var a=$("#bpmTableForm").validate({rules:{name:{required:true,maxlength:20,word:true},comment:{maxlength:200,quotation:true}},messages:{name:{required:$lang_form.editTable.tableNameRequired,maxlength:$lang_form.editTable.tableNameMaxlength},comment:{maxlength:$lang_form.editTable.tableDescMaxlength}}});return a;}function validateField(){var a=$("#frmFields").validate({rules:{fieldDesc:{quotation:true},fieldName:{required:true,uniqueName:__isFieldAdd__,word:true},charLen:{required:true,digits:true,range:[1,4000]},intLen:{required:true,digits:true,range:[1,18]},decimalLen:{required:true,digits:true,range:[0,6]}},messages:{fieldName:{required:$lang_form.editTable.fieldNameRequired},charLen:{required:$lang_form.editTable.charLenRequired,digits:$lang_form.editTable.digits},intLen:{required:$lang_form.editTable.intLenRequired,digits:$lang_form.editTable.digits},decimalLen:{required:$lang_form.editTable.decimalLenRequired,digits:$lang_form.editTable.digits}}});return a;}function handIsMain(){$("input[name='isMain']").click(function(){var a=$(this).val();var b=$("#spanMainTable");(a==1)?b.hide():b.show();handIsList(a);});}function handIsList(b){var a=$("th[name='Listth']");var c=$("td[name='Listtd']");if(b==1){a.show();c.show();}else{a.hide();c.hide();}}function handValueFrom(){$("#valueFrom").change(function(){var c=$("#fieldType").val();var a=$(this).val();hdlControlTypeShow(c,a);var b=$("#controlType").val();hdlShowCurUserTrShow(c,a,b);hdlShowCurOrgTrShow(c,a,b);hdlShowCurPosTrShow(c,a,b);hdlDictTrShow(c,a,b);hdlIdentityTrShow(c,a,b);hdlScriptTrShow(c,a,b);hdlScriptIdTrShow(c,a,b);hdlRuleTrShow(c,a,b);hdlOptionTrShow(c,a,b);hdlIsReferenceShow(a,b);});}function isExecutorSelector(a){a=parseInt(a);if(a==4||a==8||a==17||a==5||a==18||a==6||a==19||a==7||a==20){return true;}return false;}function handFieldType(){$("#fieldType").change(function(){var a=$(this).val();if(a==varchar_||a==clob_||a==number_){$("#trControlType").show();}handCondition();var b=$("#controlType").val();if(a==varchar_){$("#spanCharLen").show();$("#spanIntLen,#spanDecimalLen,#spanDateFormat").hide();$("#showComdify,#spanCoin,#spanCoinType").hide();if(b=="11"||b=="13"||b=="14"){$("#trOption").show();}else{$("#trOption").hide();}}else{if(a==number_){$("#spanCharLen,#trOption,#spanDateFormat").hide();$("#spanDecimalLen,#spanIntLen,#spanCoin").show();$("#showComdify").show();$("#showidentity").hide();if(b=="11"||b=="13"||b=="14"){$("#trOption").show();}else{$("#trOption").hide();}}else{if(a==date_){$("#spanCharLen,#spanIntLen,#spanDecimalLen,#trOption").hide();$("#spanDateFormat").show();$("#showComdify,#spanCoin,#spanCoinType").hide();$("#showidentity").hide();}else{$("#spanCharLen,#spanIntLen,#spanDecimalLen,#trOption,#spanDateFormat").hide();$("#showComdify,#spanCoin,#spanCoinType").hide();$("#showidentity").hide();}}}if(a==varchar_||a==clob_){$("#trRule").show();}else{$("#trRule").hide();}setValueFromByFieldType(a);setControlByType(a);$("#trScript").hide();$("#trScriptID").hide();$("#showCurUserTr").hide();$("#showCurOrgTr").hide();$("#showCurPosTr").hide();var b=$("#controlType").val();setShowFlowVar(b);});}function handConditionClick(){$("#isQuery").click(handCondition);}function handCondition(){var c=$("#isQuery");var d=c.attr("checked")=="checked";if(d){var b=$("#selCondition");var a=$("#fieldType").val();if(a!==clob_){}else{c.removeAttr("checked");}}else{}}function handCoinClick(){var a=$("#coin");a.click(handCoin);}function handCoin(){var c=$("#coin");var a=$("#isShowComdify");var d=c.attr("checked")=="checked";if(d){var b=$("#fieldType").val();if(b==number_){$("#spanCoinType").show();$("#decimalLen").val(2);a.attr("checked",true);a.attr("disabled",true);}else{$("#spanCoinType").hide();$("#decimalLen").val(0);c.removeAttr("checked");a.removeAttr("checked");a.attr("disabled",false);}}else{$("#spanCoinType").hide();$("#decimalLen").val(0);a.attr("disabled",false);a.attr("checked",false);}}function changeCharLen(a){$("#charLen").val(a);}function handControlType(){$("#controlType").change(function(){var c=parseInt($(this).val());$("#formUserTr").hide();$("#spanDateFormat").hide();setShowFlowVar(c);if(c==15){$("#spanDateFormat").show();}var d=$("#fieldType").val();var a=$("#valueFrom").val();var b=$(this).val();hdlShowCurUserTrShow(d,a,b);hdlShowCurOrgTrShow(d,a,b);hdlShowCurPosTrShow(d,a,b);hdlDictTrShow(d,a,b);hdlIdentityTrShow(d,a,b);hdlScriptTrShow(d,a,b);hdlScriptIdTrShow(d,a,b);hdlRuleTrShow(d,a,b);hdlOptionTrShow(d,a,b);hdlIsReferenceShow(a,b);hdlCharLen(b);hdlIsWebSignShow(d,a,b);hdlShowUpLoadTrShow(d,a,b);});}function hdlIsWebSignShow(c,a,b){$("#isWebSign").removeAttr("disabled");if(b==12||b==21){$("#trRule").hide();$("#trDict").hide();$("#trScript").hide();$("#trScriptID").hide();$("#trOption").hide();$("#showCurUserTr").hide();$("#showCurOrgTr").hide();$("#spanDateFormat").hide();$("#isWebSign").removeAttr("checked");$("#isWebSign").attr("disabled","disabled");}}function setControlByType(a){var b=$("#controlType");b.empty();$(controlList).each(function(c,f){var e=optiontemplate.replaceAll("#value",f.key).replace("#text",f.value);if(a==varchar_){if(f.key!="10"){b.append(e);}}else{if(a==clob_){if(f.key=="2"||f.key=="10"){b.append(e);}}else{if(a==date_){if(f.key=="1"||f.key=="16"){b.append(e);}}else{if(a==number_){if(f.key=="1"||f.key=="11"||f.key=="16"){b.append(e);}}}}}});}function setValueFromByFieldType(a){var b=$("#valueFrom");b.empty();$(varFromList).each(function(e,g){var c=g.key;var f=optiontemplate.replaceAll("#value",c).replace("#text",g.value);if(a==varchar_){b.append(f);}else{if(a==number_){if(c!=3){b.append(f);}}else{if(a==clob_){if(c==0){b.append(f);}}else{if(c!=3){b.append(f);}}}}});}function initAdd(b){isExternal=b;$("#spanIntLen,#spanCoin,#spanCoinType,#spanDecimalLen,#spanDecimalLen,#showidentity,#trDict,#trScript,#trScriptID,#trOption,#spanDateFormat,#trCondition").hide();setControlByType("varchar");JsLoader.LoadCount=1;JsLoader.Load(__ctx+"/js/lg/plugins/htCatCombo.js","javascript1");var a=$("#fieldType").val();if(a=="number"){$("#showComdify").show();$("#spanCoin").show();}else{$("#showComdify").hide();$("#spanCoin").hide();}}function resetField(){$("#spanIntLen,#spanDecimalLen,#spanDecimalLen,#trDict,#trScript,#trScriptID,#trOption,#spanDateFormat,#trCondition,#showIsReference,#showidentity,#trUpLoad").hide();setControlByType("varchar");$("#fieldName,#fieldDesc").val("");$("#isRequired,#isFlowVar,#isQuery,#isReference,#isShowComdify,#coin,#isCurrentDate,#showCurUser,#showCurOrg,#showCurPos,#isWebSign").attr("checked",false);$("#isList").attr("checked","checked");$("#fieldType").val("varchar").change();$("#charLen").val(2000);$("#intLen").val(13);$("#decimalLen").val(0);$("tr.editable-tr",$("#option-table")).remove();$("#selDateFormat").val("yyyy-MM-dd");$("#validRule").get(0).selectedIndex=0;$("#script,#scriptID").val("");$("#isShowComdify").attr("disabled",false);}function setFieldLengthByFieldValue(d){if(d.fieldType==varchar_){var c=parseInt($("#charLen").val());d.charLen=c;}else{if(d.fieldType==number_){var b=parseInt($("#intLen").val());var a=parseInt($("#decimalLen").val());d.intLen=b;d.decimalLen=a;}}}function setFieldByValueFrom(c){var d=parseInt(c.valueFrom);switch(d){case 0:break;case 1:case 2:var a=$("#controlType").val();var b=isExecutorSelector(a);if(b){c.scriptID=$("#scriptID").val();}c.script=$("#script").val();break;case 3:c.identity=$("#identityAlias").val();break;}}function setFieldLengthByField(b){var a=b.fieldType;switch(a){case varchar_:$("#charLen").val(b.charLen);$("#spanCharLen").show();$("#spanIntLen,#spanDecimalLen,#showComdify,#spanCoin,#spanCoinType").hide();break;case number_:$("#intLen").val(b.intLen);$("#decimalLen").val(b.decimalLen);$("#spanCharLen").hide();$("#spanIntLen,#spanDecimalLen,#showComdify,#spanCoin").show();break;default:$("#spanCharLen,#spanIntLen,#spanDecimalLen,#showComdify,#spanCoin,#spanCoinType").hide();break;}}function setValueFromByField(a){$("#valueFrom").val(a.valueFrom);var c=parseInt(a.valueFrom);switch(c){case 0:$("#trScript,#trScriptID").hide();break;case 1:case 2:var b=a.controlType;if(isExecutorSelector(b)){$("#trScriptID").show();$("#scriptID").val(a.scriptID);}$("#trScript").show();$("#showidentity").hide();$("#script").val(a.script);break;case 3:$("#trScript").hide();$("#trScript,ID").hide();$("#showidentity").show();$("#identityAlias").val(a.identity);break;}}function setValidRuleByField(b){var a=b.validRule;if(b.fieldType==varchar_||b.fieldType==clob_){$("#trRule").show();$("#validRule").val(a);}else{$("#trRule").hide();}}function setFieldByValidRule(a){if(a.fieldType==varchar_||a.fieldType==clob_){a.validRule=$("#validRule").val();}}function getOptionData(){var a=[];$("tr.editable-tr",$("#option-table")).each(function(){var c=$(this),b=$("input[name='optionKey']",c).val(),d=$("input[name='optionValue']",c).val();a.push({key:b,value:d});});return a;}function getField(){var j={charLen:0,intLen:0,decimalLen:0,dictType:"",identity:"",validRule:"",isDeleted:0,valueFrom:0,script:"",controlType:1};j.fieldName=$("#fieldName").val();j.fieldDesc=$("#fieldDesc").val();j.fieldType=$("#fieldType").val();j.controlType=$("#controlType").val();if(j.controlType==3){j.dictType=$("#dictType").val();}if(j.controlType==11||j.controlType==13||j.controlType==14){var i=getOptionData();j.options=JSON2.stringify(i);}if(j.controlType==15||j.fieldType==date_){var g=$("#isCurrentDate").attr("checked");var k=$("#selDateFormat").val().trim();var l;if(g!=undefined){l={"format":k,"displayDate":1};}else{l={"format":k,"displayDate":0};}j.ctlProperty=JSON2.stringify(l);}if(j.controlType==4){var c=$("#showCurUser:checked").val()?1:0;l={"showCurUser":c};j.ctlProperty=JSON2.stringify(l);}if(j.controlType==18){var f=$("#showCurOrg:checked").val()?1:0;l={"showCurOrg":f};j.ctlProperty=JSON2.stringify(l);}if(j.controlType==19){var d=$("#showCurPos:checked").val()?1:0;l={"showCurPos":d};j.ctlProperty=JSON2.stringify(l);}j.isRequired=$("#isRequired").attr("checked")?1:0;j.isList=$("#isList").attr("checked")?1:0;j.isQuery=$("#isQuery").attr("checked")?1:0;j.isFlowVar=$("#isFlowVar").attr("checked")?1:0;j.isWebSign=$("#isWebSign").attr("checked")?1:0;if(j.controlType==9){var e=$("#isDirectUpLoad").attr("checked")?1:0;l={"isDirectUpLoad":e};j.ctlProperty=JSON2.stringify(l);}if(isExecutorSelector(j.controlType)){j.isReference=$("#isReference").attr("checked")?1:0;}if(j.fieldType==number_){var h=$("input[name='coin']:checked").val();var b=$("#isShowComdify").attr("checked")?true:false;var l={};if(h){var a=$("#CoinType").val();l.coinValue=a;l.isShowComdify=b;l.decimalValue=parseInt($("#decimalLen").val());j.ctlProperty=JSON2.stringify(l);}else{l.coinValue="";l.isShowComdify=b;l.decimalValue=parseInt($("#decimalLen").val());j.ctlProperty=JSON2.stringify(l);}}setFieldLengthByFieldValue(j);j.valueFrom=$("#valueFrom").val();setFieldByValueFrom(j);setFieldByValidRule(j);setCondition(j);setShowFlowVar(j.controlType);return j;}function setShowFlowVar(a){if(isHideFlowVar(a)){$("#showFlowVar").hide();$("#isFlowVar").attr("checked",false);}else{$("#showFlowVar").show();}}function isHideFlowVar(a){if($.isEmpty(a)){return false;}if(a==2||a==9||a==10||a==12||a==21){return true;}return false;}function setCondition(c){if(c.isQuery==0){return;}var e=$("#selCondition").val();var d=$("#selValueFrom").val();var b=$("#selValInput").val();if(c.ctlProperty!=null&&c.ctlProperty!=""){var a=jQuery.parseJSON(c.ctlProperty);a.condition=e;a.condValFrom=d;a.condValue=b;c.ctlProperty=JSON2.stringify(a);}else{var a={condition:e,condValFrom:d,condValue:b};c.ctlProperty=JSON2.stringify(a);}}function initNumber(field){if(field.fieldType=="number"){$("#showComdify").show();$("#spanCoin").show();try{var property=eval("("+field.ctlProperty+")");$("#isShowComdify").attr("checked",property.isShowComdify);if(property.coinValue!=null&&property.coinValue!=""){$("#isShowComdify").attr("disabled",true);$("#spanCoinType").show();$("#CoinType").val(property.coinValue);$("#coin").attr("checked","checked");}}catch(e){}}else{$("#showComdify").hide();$("#spanCoin").hide();$("#spanCoinType").hide();}}function initControlByField(field,allowEditColName,_isExternal){isExternal=_isExternal;$("#fieldName").val(field.fieldName);$("#fieldDesc").val(field.fieldDesc);$("#fieldType").val(field.fieldType);initNumber(field);$("#isRequired").attr("checked",field.isRequired==1);$("#isList").attr("checked",field.isList==1);$("#isQuery").attr("checked",field.isQuery==1);$("#isFlowVar").attr("checked",field.isFlowVar==1);$("#isReference").attr("checked",field.isReference==1);$("#isWebSign").attr("checked",field.isWebSign==1);setFieldLengthByField(field);if(field.fieldType==date_||field.controlType==15){$("#spanDateFormat").show();try{var property=eval("("+field.ctlProperty+")");$("#selDateFormat").val(property.format);if(property.displayDate==1){$("#isCurrentDate").attr("checked","checked");}}catch(e){}}bindCondition(field);setShowFlowVar(field.controlType);setEditStatus(allowEditColName);JsLoader.LoadCount=1;JsLoader.Load(__ctx+"/js/lg/plugins/htCatCombo.js","javascript1");var ft=field.fieldType;var vf=field.valueFrom;var ct=field.controlType;hdlValueFromShow(ft,vf);hdlControlTypeShow(ft,vf,ct);hdlIdentityTrShow(ft,vf,ct,field.identity);hdlScriptTrShow(ft,vf,ct,field.script);hdlScriptIdTrShow(ft,vf,ct,field.scriptID);hdlOptionTrShow(ft,vf,ct,field.options);hdlRuleTrShow(ft,vf,ct,field.validRule);hdlDictTrShow(ft,vf,ct,field.dictType);hdlIsReferenceShow(vf,ct,field.isReference);var curUser=null,curOrg=null,curPos=null;if(field.ctlProperty){var prop=$.parseJSON(field.ctlProperty);curUser=prop.showCurUser||null;curOrg=prop.showCurOrg||null;curPos=prop.showCurPos||null;}hdlShowCurUserTrShow(ft,vf,ct,curUser);hdlShowCurOrgTrShow(ft,vf,ct,curOrg);hdlShowCurPosTrShow(ft,vf,ct,curPos);hdlIsWebSignShow(ft,vf,ct);var isDirectUpLoad=null;if(field.ctlProperty){var prop=$.parseJSON(field.ctlProperty);isDirectUpLoad=prop.isDirectUpLoad||null;}hdlShowUpLoadTrShow(ft,vf,ct,isDirectUpLoad);}function setEditStatus(a){if(a){return;}$("#fieldName").attr("disabled","disabled");$("#charLen").attr("disabled","disabled");$("#intLen").attr("disabled","disabled");$("#decimalLen").attr("disabled","disabled");$("#fieldType").attr("disabled","disabled");if(isExternal==0){$("#valueFrom").attr("disabled","disabled");$("#controlType").attr("disabled","disabled");}}function bindTable(g,b,f){var e=g.table;$("#name").val(e.tableName);if(b){$("#name").attr("disabled","disabled");$(":radio[name='isMain']").attr("disabled","disabled");$("#mainTable").attr("disabled","disabled");}if(e.isPublished){$(":radio[name='isMain']").attr("disabled","disabled");}$("#comment").val(e.tableDesc);$(":radio[name='isMain'][value="+e.isMain+"]").attr("checked","checked");if(e.isMain==0){if(!b&&e.isPublished==1){var a="get.ht?canClose=1&hasClose=true&tableId="+e.mainTableId;$("a.moreinfo",$("#showMainTable")).attr("hrefstr",a).append(e.mainTableDesc);$("#showMainTable").show();$("#spanMainTable").hide();}else{if(e.isPublished==0){$("div.generate").show();}if(e.mainTableId==null||e.mainTableId==""){$("#spanMainTable").show();$("#showMainTable").hide();}else{var a="get.ht?canClose=1&hasClose=true&tableId="+e.mainTableId;$("a.moreinfo",$("#showMainTable")).attr("hrefstr",a).append(e.mainTableDesc);$("#showMainTable").show();}}}else{$("#spanMainTable").hide();$("#showMainTable").hide();}$("#mainTable").val(e.mainTableId);$("#mainTableId").val(e.mainTableId);if(f){$("#tableName").val(e.mainTableDesc);}var d={showDel:false};if(!b){d.showDel=1;}var c=g.fieldList;TableRow.fieldManage.setFields(c);$("#tableColumnItem>tbody").append(TableRow.fieldManage.getHtml(d));handisList();if(!b){$("[name=isFlowVar]:checked").each(function(){var h=$(this);h.attr("disabled","disabled");h.data("isFlowVar",true);});}}function bindExtTable(e,b){var d=e.table;$("#name").val(d.tableName);$("#name").attr("disabled","disabled");$("#comment").val(d.tableDesc);var c=e.fieldList;TableRow.setAllowEditColName(false);TableRow.fieldManage.setFields(c);$("#tableColumnItem>tbody").append(TableRow.fieldManage.getHtml({showDel:false}));if(b){$("[name=isFlowVar]:checked").each(function(){var f=$(this);f.attr("disabled","disabled");f.data("isFlowVar",true);});}bindPkField("pkField",c,d.pkField);bindPkField("relation",c,d.relation);var a=d.isMain;$(":radio[name='isMain'][value="+a+"]").attr("checked","checked");if(d.isMain==1){$("#trSubTable").hide();}else{$("#trSubTable").show();}$("#mainTableId").val(d.mainTableId);$("#mainTableName").val(d.mainTableName);}function bindPkField(d,a,g){var f=$("#"+d);for(var b=0;b<a.length;b++){var e=a[b];var c=optiontemplate.replaceAll("#value",e.fieldName).replace("#text",e.fieldDesc);f.append(c);}if(g!=undefined&&g!=null&&g!=""){f.val(g);}}function bindIdentity(a,g){var e=$("#keyValue");for(var b=0;b<a.length;b++){var f=a[b];var c=optiontemplate.replaceAll("#value",f.alias).replace("#text",f.name);e.append(c);}if(g!=undefined&&g==null&&g!=""){e.val(g);}}function bindCondition(field){if(field.isQuery==0){return;}var fieldType=field.fieldType;var prop=field.ctlProperty;var jsonObj=null;if(prop!=null&&prop!=undefined&&prop!=""){try{jsonObj=eval("("+prop+")");}catch(e){jsonObj=null;}}var obj=$("#selCondition");var valFrom=$("#selValueFrom");var value=$("#selValue");if(jsonObj!=null){setTimeout(function(){var condition=jsonObj.condition;var condValFrom=jsonObj.condValFrom;var condValue=jsonObj.condValue;obj.val(condition);valFrom.val(condValFrom);initSelValueFrom(value,condValFrom);if(condValFrom==2||condValFrom==3){$("#selValInput").val(condValue);}else{if(condValFrom==1){$("#selValInput").html(condValue);}}},100);}else{initSelValueFrom(value,-1);}}function initSelValueFrom(b,c){switch(c){case"1":var a="<span id='selValInput'>"+$lang.operate.formInput+"</span>";b.html(a);break;case"2":var a="<textarea id='selValInput' cols='40' rows='3'></textarea>";b.html(a);break;case"3":var a="<a href='#' class='link var' title='"+$lang.operate.commonScript+"' onclick='selSelectScript(this)'>"+$lang.operate.commonScript+"</a></br>";a+="<textarea  id='selValInput' cols='40' rows='3'></textarea>";b.html(a);break;default:var a="";b.html(a);}}function selSelectScript(a){var b=$("#selValInput");ScriptDialog({callback:function(c){b.val(c);}});}function hdlValueFromShow(a,c){var b=[];switch(a){case varchar_:var b=[{key:0,value:$lang_form.editTable.varFrom.formInput},{key:1,value:$lang_form.editTable.varFrom.scriptDisplay},{key:2,value:$lang_form.editTable.varFrom.scriptHide},{key:3,value:$lang_form.editTable.varFrom.serialNumber}];break;case clob_:var b=[{key:0,value:$lang_form.editTable.varFrom.formInput}];break;case date_:var b=[{key:0,value:$lang_form.editTable.varFrom.formInput}];break;case number_:var b=[{key:0,value:$lang_form.editTable.varFrom.formInput},{key:1,value:$lang_form.editTable.varFrom.scriptDisplay},{key:2,value:$lang_form.editTable.varFrom.scriptHide}];break;}var d=$("#valueFrom");d.empty();$(b).each(function(f,h){var e=h.key;var g=$(optiontemplate.replaceAll("#value",e).replace("#text",h.value));if(c!=undefined&&c!=null&&c!=""){if(e==c){g.attr("selected","selected");}}d.append(g);});}function hdlControlTypeShow(f,b,c){b=""+b;var e=$("#trControlType");var d=$("#controlType");d.empty();var a=[];e.hide();switch(f){case varchar_:switch(b){case"0":e.show();a=[{key:"1",value:$lang_form.editTable.control.text},{key:"2",value:$lang_form.editTable.control.textarea},{key:"10",value:$lang_form.editTable.control.ckeditor},{key:"3",value:$lang_form.editTable.control.dictionary},{key:"4",value:$lang_form.editTable.control.userSingle},{key:"8",value:$lang_form.editTable.control.userMulti},{key:"17",value:$lang_form.editTable.control.roleSingle},{key:"5",value:$lang_form.editTable.control.roleMulti},{key:"18",value:$lang_form.editTable.control.orgSingle},{key:"6",value:$lang_form.editTable.control.orgMulti},{key:"19",value:$lang_form.editTable.control.posSingle},{key:"7",value:$lang_form.editTable.control.posMulti},{key:"16",value:$lang_form.editTable.control.hidedomaid},{key:"9",value:$lang_form.editTable.control.attachement},{key:"11",value:$lang_form.editTable.control.select},{key:"13",value:$lang_form.editTable.control.checkbox},{key:"14",value:$lang_form.editTable.control.radio},{key:"12",value:$lang_form.editTable.control.officeControl},{key:"15",value:$lang_form.editTable.control.datepicker},{key:"20",value:$lang_form.editTable.control.processInstance},{key:"21",value:$lang_form.editTable.control.webSignControl},{key:"22",value:$lang_form.editTable.control.pictureShowControl}];break;case"1":case"2":e.show();a=[{key:"1",value:$lang_form.editTable.control.text},{key:"2",value:$lang_form.editTable.control.textarea},{key:"3",value:$lang_form.editTable.control.dictionary},{key:"4",value:$lang_form.editTable.control.userSingle},{key:"8",value:$lang_form.editTable.control.userMulti},{key:"17",value:$lang_form.editTable.control.roleSingle},{key:"5",value:$lang_form.editTable.control.roleMulti},{key:"18",value:$lang_form.editTable.control.orgSingle},{key:"6",value:$lang_form.editTable.control.orgMulti},{key:"19",value:$lang_form.editTable.control.posSingle},{key:"7",value:$lang_form.editTable.control.posMulti},{key:"16",value:$lang_form.editTable.control.hidedomaid},{key:"9",value:$lang_form.editTable.control.attachement},{key:"11",value:$lang_form.editTable.control.select},{key:"13",value:$lang_form.editTable.control.checkbox},{key:"14",value:$lang_form.editTable.control.radio},{key:"15",value:$lang_form.editTable.control.datepicker},{key:"20",value:$lang_form.editTable.control.processInstance}];break;case"3":break;}break;case clob_:switch(b){case"0":e.show();a=[{key:"2",value:$lang_form.editTable.control.textarea},{key:"10",value:$lang_form.editTable.control.ckeditor}];break;case"1":case"2":case"3":break;}break;case date_:switch(b){case"0":e.show();a=[{key:"1",value:$lang_form.editTable.control.text},{key:"15",value:$lang_form.editTable.control.datepicker},{key:"16",value:$lang_form.editTable.control.hidedomaid}];break;case"1":case"2":case"3":break;}break;case number_:switch(b){case"0":a[2]={key:"11",value:$lang_form.editTable.control.select};case"1":case"2":e.show();a[0]={key:"1",value:$lang_form.editTable.control.text};a[1]={key:"16",value:$lang_form.editTable.control.hidedomaid};break;case"3":break;}break;}$(a).each(function(g,j){var h=$(optiontemplate.replaceAll("#value",j.key).replace("#text",j.value));if(c!=undefined&&c!=null&&c!=""){if(c==j.key){h.attr("selected","selected");}}if(isExternal==0){d.append(h);}else{if(!isExecutorSelector(j.key)){d.append(h);}}});}function hdlShowCurUserTrShow(c,a,b,e){a=""+a;b=""+b;var d=$("#showCurUserTr");d.hide();switch(a){case"0":switch(b){case"1":break;case"2":break;case"3":break;case"4":d.show();break;case"8":break;case"17":break;case"5":break;case"18":break;case"6":break;case"19":break;case"7":break;case"16":break;case"9":break;case"11":break;case"13":break;case"14":break;case"12":break;case"15":break;case"20":break;case"21":break;case"22":break;}break;case"1":case"2":case"3":break;}if(e){$("#showCurUser").attr("checked","checked");}}function hdlShowUpLoadTrShow(c,a,b,e){a=""+a;b=""+b;var d=$("#trUpLoad");d.hide();switch(a){case"0":switch(b){case"1":break;case"2":break;case"3":break;case"4":break;case"8":break;case"17":break;case"5":break;case"18":break;case"6":break;case"19":break;case"7":break;case"16":break;case"9":d.show();break;case"11":break;case"13":break;case"14":break;case"12":break;case"15":break;case"20":break;case"21":break;case"22":break;}break;case"1":case"2":case"3":break;}if(e!=undefined||e!=null||e!=""){if(e==1){$("input[name='isDirectUpLoad']").attr("checked","checked");}}}function hdlScriptTrShow(e,a,b,d){a=""+a;b=""+b;var c=$("#trScript");c.hide();switch(a){case"0":break;case"1":c.show();case"2":c.show();case"3":break;}if(d!=undefined&&d!=null&&d!=""){$("#script").val(d);}}function hdlScriptIdTrShow(e,a,b,d){a=""+a;b=""+b;var c=$("#trScriptID");c.hide();switch(a){case"0":break;case"1":switch(b){case"1":break;case"2":break;case"3":break;case"4":c.show();break;case"8":c.show();break;case"17":c.show();break;case"5":c.show();break;case"18":c.show();break;case"6":c.show();break;case"19":c.show();break;case"7":c.show();break;case"16":break;case"9":break;case"11":break;case"13":break;case"14":break;case"12":break;case"15":break;case"20":c.show();break;case"21":break;case"22":break;}break;case"2":switch(b){case"1":break;case"2":break;case"3":break;case"4":c.show();break;case"8":c.show();break;case"17":c.show();break;case"5":c.show();break;case"18":c.show();break;case"6":c.show();break;case"19":c.show();break;case"7":c.show();break;case"16":break;case"9":break;case"11":break;case"13":break;case"14":break;case"12":break;case"15":break;case"20":c.show();break;case"21":break;case"22":break;}break;case"3":break;}if(d!=undefined&&d!=null&&d!=""){$("#scriptID").val(d);}}function hdlDictTrShow(e,a,b,d){a=""+a;b=""+b;var c=$("#trDict");c.hide();switch(a){case"0":switch(b){case"1":break;case"2":break;case"3":c.show();break;case"4":break;case"8":break;case"17":break;case"5":break;case"18":break;case"6":break;case"19":break;case"7":break;case"16":break;case"9":break;case"11":break;case"13":break;case"14":break;case"12":break;case"15":break;case"20":break;case"21":break;case"22":break;}break;case"1":break;case"2":break;case"3":break;}if(d!=undefined&&d!=null&&d!=""){$("#dictTypeName").attr("catValue",d);}}function hdlRuleTrShow(e,a,b,d){a=""+a;b=""+b;var c=$("#trRule");c.hide();switch(a){case"0":switch(b){case"1":case"2":c.show();break;}break;case"1":break;case"2":break;case"3":break;}if(e==number_){c.hide();}if(d!=undefined&&d!=null&&d!=""){$("#validRule").val(d);}}function hdlIdentityTrShow(d,a,b){a=""+a;b=""+b;var c=$("#showidentity");c.hide();switch(a){case"0":break;case"1":break;case"2":break;case"3":c.show();break;}}function hdlShowCurOrgTrShow(e,a,b,d){a=""+a;b=""+b;var c=$("#showCurOrgTr");c.hide();switch(a){case"0":switch(b){case"1":break;case"2":break;case"3":break;case"4":break;case"8":break;case"17":break;case"5":break;case"18":c.show();break;case"6":break;case"19":break;case"7":break;case"16":break;case"9":break;case"11":break;case"13":break;case"14":break;case"12":break;case"15":break;case"20":break;case"21":break;case"22":break;}break;case"1":break;case"2":break;case"3":break;}if(d){$("#showCurOrg").attr("checked","checked");}}function hdlShowCurPosTrShow(e,a,b,d){a=""+a;b=""+b;var c=$("#showCurPosTr");c.hide();switch(a){case"0":switch(b){case"1":break;case"2":break;case"3":break;case"4":break;case"8":break;case"17":break;case"5":break;case"18":break;case"6":break;case"19":c.show();break;case"7":break;case"16":break;case"9":break;case"11":break;case"13":break;case"14":break;case"12":break;case"15":break;case"20":break;case"21":break;}break;case"1":break;case"2":break;case"3":break;}if(d){$("#showCurPos").attr("checked","checked");}}function hdlOptionTrShow(ft,vf,ct,value){vf=""+vf;ct=""+ct;var tr=$("#trOption");tr.hide();switch(ft){case varchar_:switch(vf){case"0":switch(ct){case"1":break;case"2":break;case"3":break;case"4":break;case"8":break;case"17":break;case"5":break;case"18":break;case"6":break;case"19":break;case"7":break;case"16":break;case"9":break;case"11":tr.show();break;case"13":tr.show();break;case"14":tr.show();break;case"12":break;case"15":break;case"21":break;case"22":break;}break;case"1":break;case"2":break;case"3":break;}break;case number_:switch(vf){case"0":switch(ct){case"1":break;case"2":break;case"3":break;case"4":break;case"8":break;case"17":break;case"5":break;case"18":break;case"6":break;case"19":break;case"7":break;case"16":break;case"9":break;case"11":tr.show();break;case"13":tr.show();break;case"14":tr.show();break;case"12":break;case"15":break;case"21":break;case"22":break;}break;case"1":break;case"2":break;}break;}if(value!=undefined&&value!=null&&value!=""){var optsAry=[];try{optsAry=eval("("+value+")");}catch(e){}initOptionArray(optsAry);}}function initOptionArray(e){var b=$("#option-table>tbody");if(typeof(e)!=undefined&&e!=null&&e!=""&&e.length>0){for(var d=0,g;g=e[d++];){var a=addColumn(g);b.append(a);}}else{var f={key:" ",value:"--请选择--"};var a=addColumn(f);b.append(a);}}function stopBubble(a){if(a&&a.stopPropagation){a.stopPropagation();}else{window.event.cancelBubble=true;}}function addColumn(c){var d=$("#hiddenTable"),b=$("tr.editable-tr",d),a=b.clone();if(c.key==" "||(c.value).indexOf("请选择")>-1){$("input[name='optionKey']",a).val(c.key);$("input[name='optionValue']",a).val(c.value);$("input[name='optionKey']",a).attr("readonly","readonly");$("input[name='optionValue']",a).attr("readonly","readonly");}else{$("input[name='optionKey']",a).val(c.key);$("input[name='optionValue']",a).val(c.value);}return a;}function hdlShowComdifyShow(c,b){var a=$("#showComdify");a.hide();switch(c){case number_:a.show();}}function hdlIsReferenceShow(a,c,e){c=""+c;var b=$("#showIsReference");var d=$("#isReference");b.hide();switch(c){case"4":case"8":case"17":case"5":case"18":case"6":case"19":case"7":case"20":b.show();break;}if(e&&e==1){d.attr("checked","checked");}}function hdlCharLen(a){a=""+a;changeCharLen(2000);switch(a){case"2":case"3":changeCharLen(4000);break;case"4":case"17":case"18":case"19":changeCharLen(2000);break;case"5":case"6":case"7":case"8":changeCharLen(4000);break;case"16":changeCharLen(100);break;case"9":changeCharLen(4000);break;case"11":case"13":case"14":changeCharLen(2000);break;case"15":changeCharLen(20);break;case"20":case"22":changeCharLen(2000);break;case"12":case"21":changeCharLen(50);break;}}