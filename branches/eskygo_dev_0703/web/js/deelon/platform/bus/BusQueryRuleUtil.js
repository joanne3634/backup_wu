if(typeof BusQueryRuleUtil=="undefined"){BusQueryRuleUtil={};}BusQueryRuleUtil.eidtDialog=function(d){var c=__ctx+"/platform/bus/busQueryRule/edit_"+d.tableName+".ht",a=screen.availHeight-35,e=screen.availWidth-5;var b="dialogWidth="+e+"px;dialogHeight="+a+"px;help=0;status=0;scroll=1;center=1";c=c.getNewUrl();var f=window.showModalDialog(c,{},b);if(f!=undefined){location.href=location.href.getNewUrl();}};BusQueryRuleUtil.saveFilter=function(b){var f="<div>"+'<form id="__formSaveFilter__"><table class="table-detail" cellpadding="0" cellspacing="0" border="0">'+'<tr><th style="width:113px;text-align:right;" nowrap="nowrap">过滤名称:</th>'+'<td><input type="text" name="filterName" /></td></tr>'+'<tr><th style="text-align:right;">描述:</th>'+'<td><textarea  name="filterDesc" cols="1" rows="5"  style="width:200px"></textarea></td></tr>'+"</table>"+"</form></div>";function g(i){var j={};var h=$(i).serializeArray();$.each(h,function(){if(j[this.name]){if(!j[this.name].push){j[this.name]=[j[this.name]];}j[this.name].push(this.value||"");}else{j[this.name]=this.value||"";}});return j;}function d(m,h){if(h.indexOf("?")!=-1){var l=h.substr(1),k=l.split("&");for(var j=0;j<k.length;j++){m[k[j].split("=")[0]]=unescape(k[j].split("=")[1]);}}return m;}var a=b.tableName;var c=b.filterKey;function e(n,l){var k=$("[name='filterName']",l.dialog),p=$("[name='filterDesc']",l.dialog);var i=$(l.dialog).parent().find(".panel-table").find(".sortable.sorted").find("a");if(k.val()==""){$.ligerDialog.warn("请填写过滤名称!",$lang.tip.msg);return;}var o=g(searchForm);o.filterName=k.val();o.filterDesc=p.val();o.tableName=a;o.filterKey=c;if(!$.isEmptyObject(i)){var m=i.attr("href");if(!$.isEmpty(m)){d(o,m);}}var j=__ctx+"/platform/bus/busQueryFilter/saveFilter.ht";$.post(j,o,function(h){var q=new com.deelon.form.ResultMessage(h);if(q.isSuccess()){$.ligerDialog.success($lang.save.success,$lang.tip.msg,function(){l.hide();});}else{$.ligerDialog.err($lang.tip.msg,$lang.save.failure,q.getMessage());}});}$.ligerDialog.open({title:"保存过滤条件",target:f,width:400,height:250,buttons:[{text:"保存",onclick:e},{text:"取消",onclick:function(i,h){h.hide();}}]}).show();};BusQueryRuleUtil.myFilter=function(b){var a=__ctx+"/platform/bus/busQueryFilter/list.ht?tableName="+b.tableName+"&url="+b.url;$.openFullWindow(a);};