(function(b){b.queryUI={init:function(){b("select[selectquery]").each(function(){var e=b(this);var d=e.attr("cascadename");if(!d){return true;}var f=e.attr("selectquery");if(!f){return true;}f=f.replaceAll("'",'"');var g=JSON2.parse(f);if(!g.trigger||g.trigger=="isparent"){a(e);}});c();}};var c=function(){b("select[selectquery]").live("change",function(f){var e=b(this);var d=e.attr("cascadename");if(!d){return;}b("select[selectquery]").each(function(){var g=b(this);var h=g.attr("selectquery");if(!h){return true;}h=h.replaceAll("'",'"');var i=JSON2.parse(h);if(!i.trigger||i.trigger!=d||d==g.attr("cascadename")){return true;}a(g,e);});});};var a=function(m,n){var h=m.attr("selectquery").replaceAll("'",'"');var k=JSON2.parse(h);var f=k.query;var p=k.binding.key;var o=k.binding.value;var i=k.condition;var j=i.toUpperCase();var l="";if(typeof n=="undefined"){var e=k.intvalue;l=e;querydataStr="{"+j+':"'+l+'"}';}else{var g=n.find("option:selected");var d=g.val();if(d!=null){l=d;querydataStr="{"+j+':"'+l+'"}';}else{m.empty();}}queryCond={alias:f,querydata:querydataStr,page:0,pagesize:0};m.empty();DoQuery(queryCond,function(w){if(w.errors||w.list.length<1){m.trigger("change");return;}for(var t=0;t<w.list.length;t++){var v=w.list[t];var r=v[o.toLowerCase()];var q=v[p.toLowerCase()];var s=b("<option>").val(q).text(r);m.append(s);}var u=m.attr("val");m.val(u);m.trigger("change");});};b(function(){b.queryUI.init();});})(jQuery);