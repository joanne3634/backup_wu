if(typeof ImageQtip=="undefined"){ImageQtip={};}ImageQtip.drawImg=function(a,d,b,e){var c=new Image();c.src=d;c.alt="未能成功加载图片，可能已被删除...";if(c.complete){ImageQtip.resizeImg(c,b);if(e){e(a,c,b);}else{ImageQtip.initqTip(a,c,b);}return;}c.onload=function(){ImageQtip.resizeImg(c,b);if(e){e(a,c,b);}else{ImageQtip.initqTip(a,c,b);}};};ImageQtip.getImage=function(f,b){var d=new Image();var c=$(d);c.addClass("hidden");d.src=f;d.alt="图片加载中...";if(typeof(b)!=undefined&&b!=null&&b!=""){var g=b.id;if(typeof(g)!=undefined&&g!=null&&g!=""){d.id=g;}var e=b.title;if(typeof(e)!=undefined&&e!=null&&e!=""){d.alt=e;}var a=b.zoomUrl;if(typeof(a)!=undefined&&a!=null&&a!=""){c.attr("jqimg",a);}}if(d.complete){ImageQtip.resizeImg(d,b);c.removeClass("hidden");return d;}d.onload=function(){ImageQtip.resizeImg(d,b);c.removeClass("hidden");};if(c.hasClass("hidden")){c.removeClass("hidden");}return d;};ImageQtip.resizeImg=function(b,a){if(b.width>0&&b.height>0){if(a.maxWidth>0){if(b.width>a.maxWidth){b.height=a.maxWidth*b.height/b.width;b.width=a.maxWidth;}}if(a.maxHeight>0){if(b.height>a.maxHeight){b.width=a.maxHeight*b.width/b.height;b.height=a.maxHeight;}}}};ImageQtip.initqTip=function(a,d,b){var c=d.outerHTML;$(a).qtip({content:{text:c,title:{text:"附件预览"}},position:{at:"center",target:"event",viewport:$(window)},show:{effect:function(e){$(this).slideDown(200);}},hide:{event:"mouseleave",fixed:true},style:{classes:"ui-tooltip-light ui-tooltip-shadow"}});};